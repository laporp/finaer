import{y as M,j as e,M as ue,B as V,z as me,A as he,b as d,G as a,S as I,D as x,E as xe,F as je,I as R}from"./index-CFsdimoh.js";import{r as h,b as pe}from"./router-BWB4lwgb.js";import{T as u,S as p,M as m,D as w,a as G,b as L,A as ve,c as U}from"./TextField-CsDCvwwO.js";import{F as v}from"./FormControl-D2rlFbTJ.js";import{I as b}from"./OutlinedInput-BuNOvCZQ.js";import{A as be,E as fe}from"./Edit-DOudb0NE.js";import{T as ge}from"./TableContainer-D9JOYJar.js";import{T as Ce,d as Pe,b as Y,c as l,a as Ie}from"./TableRow-BSFK4Frt.js";import"./vendor-D5d5vywP.js";import"./useControlled-qcIaR4WP.js";const N=M(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Me=M(e.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),Ae=M(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),Te=M(e.jsx("path",{d:"M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5M7 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3"})),De=M(e.jsx("path",{d:"M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5m0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3"}));function Oe(){const[s,W]=h.useState({dni:"",nombreCompleto:"",tipoUsuario:"Todos",estado:"Todos"}),[K,F]=h.useState([]),[Q,z]=h.useState(!1),[i,A]=h.useState({dni:"",nombre:"",apellido:"",fechaNacimiento:"",telefono:"",cobertura:"seleccion-cobertura",plan:"",direccion:"",email:"",estado:"Activo",motivoInactivo:"",tipoPaciente:"Ambulatorio"}),[f,j]=h.useState(""),[X,y]=h.useState(!1),[Z,k]=h.useState(!1),[n,g]=h.useState(null),[q,T]=h.useState(""),[B,C]=h.useState(""),_=["OSDE","Swiss Medical","Galeno","Medicus","Omint","Sancor Salud","IOMA","PAMI","Obra Social Unión Personal","Obra Social Empleados de Comercio","OSECAC","OSDEPYM","Particular"],ee=["Activo","Inactivo"],oe=["Fallecimiento","Fin de tratamiento","Cambio de centro médico","Abandono de tratamiento","Traslado","Otros"],ie=["Ambulatorio","Diálisis"],ae=o=>{const r={12345678:{dni:"12345678",nombre:"Juan",apellido:"Pérez",fechaNacimiento:"1985-03-15",telefono:"1156789012",cobertura:"OSDE",plan:"Plan 210",direccion:"Av. Corrientes 1234",email:"juan.perez@email.com",estado:"Activo",motivoInactivo:"",tipoPaciente:"Ambulatorio"},87654321:{dni:"87654321",nombre:"María",apellido:"González",fechaNacimiento:"1990-07-22",telefono:"1145678901",cobertura:"Swiss Medical",plan:"SMG 450",direccion:"",email:"",estado:"Activo",motivoInactivo:"",tipoPaciente:"Diálisis"},11223344:{dni:"11223344",nombre:"Carlos",apellido:"López",fechaNacimiento:"1980-12-10",telefono:"1134567890",cobertura:"Particular",plan:"",direccion:"Belgrano 567",email:"carlos.lopez@email.com",estado:"Inactivo",motivoInactivo:"Fin de tratamiento",tipoPaciente:"Ambulatorio"}}[o];r?(A(r),j("Paciente encontrado - Datos cargados para edición")):(A({dni:o,nombre:"",apellido:"",fechaNacimiento:"",telefono:"",cobertura:"",plan:"",direccion:"",email:"",estado:"Activo",motivoInactivo:"",tipoPaciente:""}),j("Paciente no encontrado - Complete los datos para registrar nuevo paciente")),z(!0)},D=[{id:1,dni:"12345678",nombre:"Juan Pérez",telefono:"1156789012",cobertura:"OSDE",tipoPaciente:"Ambulatorio",estado:"Activo"},{id:2,dni:"87654321",nombre:"María González",telefono:"1145678901",cobertura:"Swiss Medical",tipoPaciente:"Diálisis",estado:"Activo"},{id:3,dni:"11223344",nombre:"Carlos López",telefono:"1134567890",cobertura:"Particular",tipoPaciente:"Ambulatorio",estado:"Inactivo"}],E=o=>t=>{const r=t.target.value;if(o==="dni"){const P=r.replace(/\D/g,"");W({...s,[o]:P})}else W({...s,[o]:r})},te=()=>{W({dni:"",nombreCompleto:"",tipoUsuario:"Todos",estado:"Todos"}),F(D)},S=()=>{let o=[...D];if(s.dni&&(o=o.filter(t=>t.dni.includes(s.dni))),s.nombreCompleto&&(o=o.filter(t=>t.nombre.toLowerCase().includes(s.nombreCompleto.toLowerCase()))),s.tipoUsuario!=="Todos"&&(o=o.filter(t=>t.tipoPaciente===s.tipoUsuario)),s.estado!=="Todos"){const t=s.estado==="Activos"?"Activo":"Inactivo";o=o.filter(r=>r.estado===t)}F(o)};pe.useEffect(()=>{F(D)},[]);const ne=()=>{z(!0),j("")},O=()=>{z(!1),re()},c=o=>t=>{A({...i,[o]:t.target.value})},re=()=>{A({dni:"",nombre:"",apellido:"",fechaNacimiento:"",telefono:"",cobertura:"seleccion-cobertura",plan:"",direccion:"",email:"",estado:"Activo",motivoInactivo:"",tipoPaciente:"Ambulatorio"}),j("")},se=()=>{const t=["dni","nombre","apellido","fechaNacimiento","telefono","cobertura","tipoPaciente"].filter(r=>r==="cobertura"?!i[r]||i[r]==="seleccion-cobertura":!i[r]);if(i.estado==="Inactivo"&&!i.motivoInactivo&&t.push("motivoInactivo"),t.length>0){const r={dni:"DNI",nombre:"Nombre",apellido:"Apellido",fechaNacimiento:"Fecha de Nacimiento",telefono:"Teléfono",cobertura:"Cobertura",tipoPaciente:"Tipo de Paciente",motivoInactivo:"Motivo de Inactividad"},P=t.map(de=>r[de]);j(`Faltan completar los siguientes campos obligatorios: ${P.join(", ")}`);return}console.log("Guardando paciente desde modal:",i),j("Paciente guardado exitosamente"),setTimeout(()=>{O(),S()},1500)},$=(o,t)=>{const r=D.find(P=>P.dni===o);g(r),t==="Activo"?(y(!0),T(""),C("")):k(!0)},le=()=>{if(!q.trim()){C("El motivo de baja es obligatorio");return}console.log(`Desactivando paciente ${n.dni} con motivo: ${q}`),alert(`Paciente ${n.nombre} desactivado exitosamente`),y(!1),T(""),C(""),g(null),S()},H=()=>{y(!1),T(""),C(""),g(null)},ce=()=>{console.log(`Reactivando paciente ${n.dni}`),alert(`Paciente ${n.nombre} reactivado exitosamente`),k(!1),g(null),S()},J=()=>{k(!1),g(null)};return e.jsxs(ue,{title:"Gestión de Pacientes",children:[e.jsxs(V,{sx:{width:"100%"},children:[e.jsx(me,{sx:{mb:3},children:e.jsxs(he,{children:[e.jsx(d,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Filtros de Búsqueda"}),e.jsxs(a,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(u,{label:"DNI",value:s.dni,onChange:E("dni"),fullWidth:!0,placeholder:"Solo números",inputProps:{inputMode:"numeric",pattern:"[0-9]*"}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(u,{label:"Nombre Completo",value:s.nombreCompleto,onChange:E("nombreCompleto"),fullWidth:!0,placeholder:"Buscar por nombre"})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsxs(v,{fullWidth:!0,children:[e.jsx(b,{children:"Tipo de Usuario"}),e.jsxs(p,{value:s.tipoUsuario,onChange:E("tipoUsuario"),label:"Tipo de Usuario",children:[e.jsx(m,{value:"Todos",children:"Todos"}),e.jsx(m,{value:"Ambulatorio",children:"Ambulatorio"}),e.jsx(m,{value:"Diálisis",children:"Diálisis"})]})]})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsxs(v,{fullWidth:!0,children:[e.jsx(b,{children:"Estado"}),e.jsxs(p,{value:s.estado,onChange:E("estado"),label:"Estado",children:[e.jsx(m,{value:"Todos",children:"Todos"}),e.jsx(m,{value:"Activos",children:"Activos"}),e.jsx(m,{value:"Inactivos",children:"Inactivos"})]})]})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsxs(I,{direction:"row",spacing:1,children:[e.jsx(x,{variant:"contained",startIcon:e.jsx(Ae,{}),onClick:S,size:"small",children:"Buscar"}),e.jsx(x,{variant:"outlined",startIcon:e.jsx(N,{}),onClick:te,size:"small",children:"Limpiar"})]})})]}),e.jsx(xe,{sx:{my:2}}),e.jsx(V,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(x,{variant:"contained",color:"success",startIcon:e.jsx(be,{}),onClick:ne,size:"medium",children:"Nuevo Paciente"})})]})}),e.jsx(ge,{component:je,children:e.jsxs(Ce,{children:[e.jsx(Pe,{children:e.jsxs(Y,{children:[e.jsx(l,{children:"DNI"}),e.jsx(l,{children:"Nombre Completo"}),e.jsx(l,{children:"Teléfono"}),e.jsx(l,{children:"Cobertura"}),e.jsx(l,{children:"Tipo"}),e.jsx(l,{children:"Estado"}),e.jsx(l,{children:"Acciones"})]})}),e.jsx(Ie,{children:K.map(o=>e.jsxs(Y,{children:[e.jsx(l,{children:o.dni}),e.jsx(l,{children:o.nombre}),e.jsx(l,{children:o.telefono}),e.jsx(l,{children:o.cobertura}),e.jsx(l,{children:o.tipoPaciente}),e.jsx(l,{children:e.jsx(d,{color:o.estado==="Activo"?"success.main":"error.main",fontWeight:"bold",children:o.estado})}),e.jsx(l,{children:e.jsxs(I,{direction:"row",spacing:1,children:[e.jsx(R,{color:"primary",size:"small",onClick:()=>ae(o.dni),title:"Editar paciente",children:e.jsx(fe,{})}),o.estado==="Activo"?e.jsx(R,{color:"error",size:"small",onClick:()=>$(o.dni,o.estado),title:"Desactivar paciente",children:e.jsx(Te,{})}):e.jsx(R,{color:"success",size:"small",onClick:()=>$(o.dni,o.estado),title:"Reactivar paciente",children:e.jsx(De,{})})]})})]},o.id))})]})})]}),e.jsxs(w,{open:Q,onClose:O,maxWidth:"md",fullWidth:!0,children:[e.jsx(G,{children:e.jsx(d,{variant:"h6",component:"div",children:i.dni&&f.includes("encontrado")?"Editar Paciente":"Registrar Nuevo Paciente"})}),e.jsx(L,{children:e.jsxs(I,{spacing:3,sx:{mt:1},children:[f&&e.jsx(ve,{severity:f.includes("exitosamente")?"success":f.includes("Faltan")?"error":"info",children:f}),e.jsx(d,{variant:"subtitle1",fontWeight:"bold",children:"Datos del Paciente"}),e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(u,{label:"DNI *",value:i.dni,onChange:c("dni"),fullWidth:!0,required:!0,placeholder:"Ingrese DNI sin puntos"})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(u,{label:"Nombre *",value:i.nombre,onChange:c("nombre"),fullWidth:!0,required:!0})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(u,{label:"Apellido *",value:i.apellido,onChange:c("apellido"),fullWidth:!0,required:!0})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(u,{label:"Fecha de Nacimiento *",type:"date",value:i.fechaNacimiento,onChange:c("fechaNacimiento"),fullWidth:!0,required:!0,InputLabelProps:{shrink:!0}})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(u,{label:"Teléfono *",value:i.telefono,onChange:c("telefono"),fullWidth:!0,required:!0,placeholder:"Ej: 1156789012"})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(u,{label:"Correo Electrónico",type:"email",value:i.email,onChange:c("email"),fullWidth:!0,placeholder:"ejemplo@email.com"})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(u,{label:"Dirección",value:i.direccion,onChange:c("direccion"),fullWidth:!0,placeholder:"Calle, número, ciudad"})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(v,{fullWidth:!0,required:!0,children:[e.jsx(b,{children:"Cobertura Médica *"}),e.jsxs(p,{value:i.cobertura,onChange:c("cobertura"),label:"Cobertura Médica *",children:[e.jsx(m,{value:"seleccion-cobertura",disabled:!0,sx:{color:"text.disabled"},children:"Selección cobertura"}),_.map(o=>e.jsx(m,{value:o,children:o},o))]})]})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(u,{label:"Plan",value:i.plan,onChange:c("plan"),fullWidth:!0,placeholder:"Ej: Plan 210, SMG 450, etc."})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(v,{fullWidth:!0,required:!0,children:[e.jsx(b,{children:"Tipo de Paciente *"}),e.jsx(p,{value:i.tipoPaciente,onChange:c("tipoPaciente"),label:"Tipo de Paciente *",children:ie.map(o=>e.jsx(m,{value:o,children:o},o))})]})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(v,{fullWidth:!0,required:!0,children:[e.jsx(b,{children:"Estado *"}),e.jsx(p,{value:i.estado,onChange:c("estado"),label:"Estado *",children:ee.map(o=>e.jsx(m,{value:o,children:o},o))})]})}),i.estado==="Inactivo"&&e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(v,{fullWidth:!0,required:!0,children:[e.jsx(b,{children:"Motivo de Inactividad *"}),e.jsx(p,{value:i.motivoInactivo,onChange:c("motivoInactivo"),label:"Motivo de Inactividad *",children:oe.map(o=>e.jsx(m,{value:o,children:o},o))})]})})]}),e.jsxs(d,{variant:"caption",color:"text.secondary",children:["* Campos obligatorios: DNI, Nombre, Apellido, Fecha de Nacimiento, Teléfono, Cobertura Médica, Tipo de Paciente",e.jsx("br",{}),"** Los campos Plan, Correo Electrónico y Dirección son opcionales",e.jsx("br",{}),'*** Si el estado es "Inactivo", el motivo de inactividad es obligatorio']})]})}),e.jsxs(U,{children:[e.jsx(x,{onClick:O,startIcon:e.jsx(N,{}),children:"Cancelar"}),e.jsx(x,{onClick:se,variant:"contained",startIcon:e.jsx(Me,{}),children:"Guardar Paciente"})]})]}),e.jsxs(w,{open:X,onClose:H,maxWidth:"sm",fullWidth:!0,children:[e.jsx(G,{children:e.jsx(d,{variant:"h6",component:"div",children:"Desactivar Paciente"})}),e.jsx(L,{children:e.jsxs(I,{spacing:3,sx:{mt:1},children:[e.jsxs(d,{variant:"body1",children:["¿Está seguro que desea desactivar al paciente ",e.jsx("strong",{children:n==null?void 0:n.nombre})," (DNI: ",e.jsx("strong",{children:n==null?void 0:n.dni}),")?"]}),e.jsx(u,{label:"Motivo de baja *",multiline:!0,rows:3,value:q,onChange:o=>{T(o.target.value),B&&C("")},fullWidth:!0,required:!0,placeholder:"Ingrese el motivo por el cual se desactiva al paciente",error:!!B,helperText:B}),e.jsx(d,{variant:"caption",color:"text.secondary",children:"* El motivo de baja es obligatorio"})]})}),e.jsxs(U,{children:[e.jsx(x,{onClick:H,startIcon:e.jsx(N,{}),children:"Cancelar"}),e.jsx(x,{onClick:le,variant:"contained",color:"error",children:"Desactivar Paciente"})]})]}),e.jsxs(w,{open:Z,onClose:J,maxWidth:"sm",fullWidth:!0,children:[e.jsx(G,{children:e.jsx(d,{variant:"h6",component:"div",children:"Reactivar Paciente"})}),e.jsx(L,{children:e.jsxs(I,{spacing:2,sx:{mt:1},children:[e.jsxs(d,{variant:"body1",children:["¿Está seguro que desea reactivar al paciente ",e.jsx("strong",{children:n==null?void 0:n.nombre}),", DNI ",e.jsx("strong",{children:n==null?void 0:n.dni}),"?"]}),e.jsx(d,{variant:"body2",color:"text.secondary",children:"Al reactivar este paciente, podrá volver a recibir atención médica y aparecerá en las búsquedas activas."})]})}),e.jsxs(U,{children:[e.jsx(x,{onClick:J,startIcon:e.jsx(N,{}),children:"Cancelar"}),e.jsx(x,{onClick:ce,variant:"contained",color:"success",children:"Reactivar Paciente"})]})]})]})}export{Oe as default};
