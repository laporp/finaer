import{R as D,j as e,M as Pe,B as f,y as Me,z as Ee,b as w,G as l,S as Se,A as x,D as oe,E as ye,C as We,I as g}from"./index-DPdzcUTa.js";import{r as c}from"./router-BWB4lwgb.js";import{T as n,S as C,M as u,A as we}from"./TextField-D2Fs674o.js";import{F as T}from"./FormControl-Bc5q5vBv.js";import{I as P}from"./OutlinedInput-oJBVk4Jr.js";import{S as De,C as U}from"./Search-BJg9C1QO.js";import{A as ae,S as He,E as ke,T as Ie,a as Fe}from"./ToggleOn-DSwU-6U6.js";import{T as Le}from"./TableContainer-PGdmwORK.js";import{T as Ge,d as Ue,b as se,c as t,a as $e}from"./TableRow-DRjgF7nC.js";import{D as $,a as R,b as B,c as N}from"./DialogTitle-D3gBt2m5.js";import"./vendor-D5d5vywP.js";import"./useControlled-qcIaR4WP.js";const Re=D(e.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"})),Be=D(e.jsx("path",{d:"M19 3H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4z"})),Ne=D(e.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),Ve=D(e.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}));function so(){const[r,z]=c.useState({email:"",nombreCompleto:"",rol:"Todos",estado:"Todos"}),[V,O]=c.useState([]),[ie,q]=c.useState(!1),[s,m]=c.useState({email:"",nombre:"",apellido:"",telefono:"",rol:"",password:"",confirmPassword:"",estado:"activo"}),[A,H]=c.useState(null),[d,v]=c.useState({}),[J,i]=c.useState(""),[M,le]=c.useState(!1),[re,_]=c.useState(!1),[E,K]=c.useState(null),[Q,S]=c.useState({lunes:[],martes:[],miercoles:[],jueves:[],viernes:[],sabado:[],domingo:[]}),[te,X]=c.useState(!1),[y,Y]=c.useState(null),[b,k]=c.useState({matricula:"",especialidad:""}),I=["Administrador","Administrativo","Profesional","Supervisor"],ne=["Cardiología","Dermatología","Endocrinología","Gastroenterología","Ginecología","Neurología","Oftalmología","Pediatría","Psiquiatría","Traumatología"],Z=[{id:1,email:"admin@finaer.com",nombre:"Juan Carlos",apellido:"Pérez",telefono:"011-4567-8901",rol:"Administrador",fechaCreacion:"2024-01-15",estado:"activo",ultimoAcceso:"2024-07-23"},{id:2,email:"administrativo@finaer.com",nombre:"María Elena",apellido:"García",telefono:"011-4567-8902",rol:"Administrativo",fechaCreacion:"2024-02-10",estado:"activo",ultimoAcceso:"2024-07-22"},{id:3,email:"dr.lopez@finaer.com",nombre:"Carlos Alberto",apellido:"López",telefono:"011-4567-8903",rol:"Profesional",fechaCreacion:"2024-03-05",estado:"activo",ultimoAcceso:"2024-07-20"},{id:4,email:"supervisor@finaer.com",nombre:"Ana Laura",apellido:"Martínez",telefono:"011-4567-8904",rol:"Supervisor",fechaCreacion:"2024-01-20",estado:"inactivo",ultimoAcceso:"2024-07-15"}],ce=()=>{let o=Z.filter(a=>{const j=r.email===""||a.email.toLowerCase().includes(r.email.toLowerCase()),p=r.nombreCompleto===""||`${a.nombre} ${a.apellido}`.toLowerCase().includes(r.nombreCompleto.toLowerCase()),h=r.rol==="Todos"||a.rol===r.rol,W=r.estado==="Todos"||a.estado===r.estado;return j&&p&&h&&W});O(o),i(`Se encontraron ${o.length} usuarios que coinciden con los filtros.`),setTimeout(()=>i(""),3e3)},de=()=>{z({email:"",nombreCompleto:"",rol:"Todos",estado:"Todos"}),O([]),i("Filtros limpiados correctamente."),setTimeout(()=>i(""),3e3)},me=()=>{q(!0),m({email:"",nombre:"",apellido:"",telefono:"",rol:"",password:"",confirmPassword:"",estado:"activo"})},F=()=>{q(!1),m({email:"",nombre:"",apellido:"",telefono:"",rol:"",password:"",confirmPassword:"",estado:"activo"})},he=()=>{if(!s.email||!s.nombre||!s.apellido||!s.rol){i("Por favor complete todos los campos obligatorios."),setTimeout(()=>i(""),3e3);return}if(s.password!==s.confirmPassword){i("Las contraseñas no coinciden."),setTimeout(()=>i(""),3e3);return}console.log("Guardando usuario:",s),i("Usuario creado exitosamente."),setTimeout(()=>i(""),3e3),F()},xe=o=>{H(o.id),v({...o})},ue=()=>{H(null),v({})},je=()=>{console.log("Guardando cambios:",d),i("Usuario actualizado exitosamente."),setTimeout(()=>i(""),3e3),H(null),v({})},pe=(o,a)=>{console.log(`Cambiando estado del usuario ${o} a ${a}`),i(`Usuario ${a==="activo"?"activado":"desactivado"} exitosamente.`),setTimeout(()=>i(""),3e3)},fe=o=>{K(o),S({lunes:[{inicio:"08:00",fin:"12:00"},{inicio:"14:00",fin:"18:00"}],martes:[{inicio:"08:00",fin:"12:00"},{inicio:"14:00",fin:"18:00"}],miercoles:[{inicio:"08:00",fin:"12:00"},{inicio:"14:00",fin:"18:00"}],jueves:[{inicio:"08:00",fin:"12:00"},{inicio:"14:00",fin:"18:00"}],viernes:[{inicio:"08:00",fin:"12:00"},{inicio:"14:00",fin:"18:00"}],sabado:[],domingo:[]}),_(!0)},L=()=>{_(!1),K(null)},ve=o=>{S(a=>({...a,[o]:[...a[o],{inicio:"09:00",fin:"17:00"}]}))},ge=(o,a)=>{S(j=>({...j,[o]:j[o].filter((p,h)=>h!==a)}))},ee=(o,a,j,p)=>{S(h=>({...h,[o]:h[o].map((W,Ae)=>Ae===a?{...W,[j]:p}:W)}))},be=()=>{console.log("Guardando horarios para usuario:",E.id,Q),i("Horarios laborales actualizados exitosamente."),setTimeout(()=>i(""),3e3),L()},Ce=o=>{Y(o),k({matricula:o.matricula||"",especialidad:o.especialidad||""}),X(!0)},G=()=>{X(!1),Y(null)},Te=()=>{if(!b.matricula||!b.especialidad){i("Por favor complete todos los campos obligatorios."),setTimeout(()=>i(""),3e3);return}console.log("Guardando datos profesionales para usuario:",y.id,b),i("Datos profesionales actualizados exitosamente."),setTimeout(()=>i(""),3e3),G()},ze=V.length>0?V:Z;return e.jsxs(Pe,{title:"Gestión de Usuarios",children:[e.jsxs(f,{sx:{width:"100%"},children:[e.jsx(Me,{sx:{mb:3},children:e.jsxs(Ee,{children:[e.jsx(w,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Filtros de Búsqueda"}),e.jsxs(l,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(l,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Email",value:r.email,onChange:o=>z({...r,email:o.target.value}),placeholder:"usuario@email.com"})}),e.jsx(l,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Nombre Completo",value:r.nombreCompleto,onChange:o=>z({...r,nombreCompleto:o.target.value}),placeholder:"Juan Pérez"})}),e.jsx(l,{item:!0,xs:12,md:2,children:e.jsxs(T,{fullWidth:!0,children:[e.jsx(P,{children:"Rol"}),e.jsxs(C,{value:r.rol,label:"Rol",onChange:o=>z({...r,rol:o.target.value}),children:[e.jsx(u,{value:"Todos",children:"Todos"}),I.map(o=>e.jsx(u,{value:o,children:o},o))]})]})}),e.jsx(l,{item:!0,xs:12,md:2,children:e.jsxs(T,{fullWidth:!0,children:[e.jsx(P,{children:"Estado"}),e.jsxs(C,{value:r.estado,label:"Estado",onChange:o=>z({...r,estado:o.target.value}),children:[e.jsx(u,{value:"Todos",children:"Todos"}),e.jsx(u,{value:"activo",children:"Activo"}),e.jsx(u,{value:"inactivo",children:"Inactivo"})]})]})}),e.jsx(l,{item:!0,xs:12,md:2,children:e.jsxs(Se,{direction:"row",spacing:1,children:[e.jsx(x,{variant:"contained",startIcon:e.jsx(De,{}),onClick:ce,size:"small",children:"Buscar"}),e.jsx(x,{variant:"outlined",startIcon:e.jsx(U,{}),onClick:de,size:"small",children:"Limpiar"})]})})]}),e.jsx(oe,{sx:{my:2}}),e.jsx(f,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(x,{variant:"contained",color:"success",startIcon:e.jsx(ae,{}),onClick:me,size:"medium",children:"Nuevo Usuario"})})]})}),J&&e.jsx(we,{severity:"info",sx:{mb:2},children:J}),e.jsx(Le,{component:ye,children:e.jsxs(Ge,{children:[e.jsx(Ue,{children:e.jsxs(se,{children:[e.jsx(t,{children:e.jsx("strong",{children:"Email"})}),e.jsx(t,{children:e.jsx("strong",{children:"Nombre Completo"})}),e.jsx(t,{children:e.jsx("strong",{children:"Teléfono"})}),e.jsx(t,{children:e.jsx("strong",{children:"Rol"})}),e.jsx(t,{children:e.jsx("strong",{children:"Fecha Creación"})}),e.jsx(t,{children:e.jsx("strong",{children:"Último Acceso"})}),e.jsx(t,{children:e.jsx("strong",{children:"Estado"})}),e.jsx(t,{children:e.jsx("strong",{children:"Acciones"})})]})}),e.jsx($e,{children:ze.map(o=>e.jsxs(se,{children:[e.jsx(t,{children:A===o.id?e.jsx(n,{size:"small",value:d.email||"",onChange:a=>v({...d,email:a.target.value})}):o.email}),e.jsx(t,{children:A===o.id?e.jsxs(f,{sx:{display:"flex",gap:1},children:[e.jsx(n,{size:"small",placeholder:"Nombre",value:d.nombre||"",onChange:a=>v({...d,nombre:a.target.value})}),e.jsx(n,{size:"small",placeholder:"Apellido",value:d.apellido||"",onChange:a=>v({...d,apellido:a.target.value})})]}):`${o.nombre} ${o.apellido}`}),e.jsx(t,{children:A===o.id?e.jsx(n,{size:"small",value:d.telefono||"",onChange:a=>v({...d,telefono:a.target.value})}):o.telefono}),e.jsx(t,{children:A===o.id?e.jsx(T,{size:"small",sx:{minWidth:120},children:e.jsx(C,{value:d.rol||"",onChange:a=>v({...d,rol:a.target.value}),children:I.map(a=>e.jsx(u,{value:a,children:a},a))})}):o.rol}),e.jsx(t,{children:o.fechaCreacion}),e.jsx(t,{children:o.ultimoAcceso}),e.jsx(t,{children:e.jsx(We,{label:o.estado==="activo"?"Activo":"Inactivo",color:o.estado==="activo"?"success":"default",size:"small"})}),e.jsx(t,{children:e.jsx(f,{sx:{display:"flex",gap:1},children:A===o.id?e.jsxs(e.Fragment,{children:[e.jsx(g,{size:"small",color:"primary",onClick:je,title:"Guardar cambios",children:e.jsx(He,{})}),e.jsx(g,{size:"small",color:"secondary",onClick:ue,title:"Cancelar edición",children:e.jsx(U,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{size:"small",color:"primary",onClick:()=>xe(o),title:"Editar usuario",children:e.jsx(ke,{})}),e.jsx(g,{size:"small",color:o.estado==="activo"?"error":"success",onClick:()=>pe(o.id,o.estado==="activo"?"inactivo":"activo"),title:o.estado==="activo"?"Desactivar usuario":"Activar usuario",children:o.estado==="activo"?e.jsx(Ie,{}):e.jsx(Fe,{})}),o.rol==="Profesional"?e.jsxs(e.Fragment,{children:[e.jsx(g,{size:"small",color:"secondary",onClick:()=>Ce(o),title:"Editar datos profesionales",children:e.jsx(Be,{})}),e.jsx(g,{size:"small",color:"info",onClick:()=>fe(o),title:"Configurar horarios laborales",children:e.jsx(Re,{})})]}):e.jsx(f,{sx:{width:80}})]})})})]},o.id))})]})})]}),e.jsxs($,{open:ie,onClose:F,maxWidth:"md",fullWidth:!0,children:[e.jsx(R,{children:"Agregar Nuevo Usuario"}),e.jsx(B,{children:e.jsxs(l,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(n,{fullWidth:!0,label:"Email *",type:"email",value:s.email,onChange:o=>m({...s,email:o.target.value}),placeholder:"usuario@email.com"})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(T,{fullWidth:!0,children:[e.jsx(P,{children:"Rol *"}),e.jsx(C,{value:s.rol,label:"Rol *",onChange:o=>m({...s,rol:o.target.value}),sx:{minWidth:200},children:I.map(o=>e.jsx(u,{value:o,children:o},o))})]})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(n,{fullWidth:!0,label:"Nombre *",value:s.nombre,onChange:o=>m({...s,nombre:o.target.value}),placeholder:"Juan"})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(n,{fullWidth:!0,label:"Apellido *",value:s.apellido,onChange:o=>m({...s,apellido:o.target.value}),placeholder:"Pérez"})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(n,{fullWidth:!0,label:"Teléfono",value:s.telefono,onChange:o=>m({...s,telefono:o.target.value}),placeholder:"011-4567-8901"})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(T,{fullWidth:!0,children:[e.jsx(P,{children:"Estado"}),e.jsxs(C,{value:s.estado,label:"Estado",onChange:o=>m({...s,estado:o.target.value}),sx:{minWidth:150},children:[e.jsx(u,{value:"activo",children:"Activo"}),e.jsx(u,{value:"inactivo",children:"Inactivo"})]})]})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(n,{fullWidth:!0,label:"Contraseña *",type:M?"text":"password",value:s.password,onChange:o=>m({...s,password:o.target.value}),InputProps:{endAdornment:e.jsx(g,{onClick:()=>le(!M),edge:"end",children:M?e.jsx(Ve,{}):e.jsx(Ne,{})})}})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(n,{fullWidth:!0,label:"Confirmar Contraseña *",type:M?"text":"password",value:s.confirmPassword,onChange:o=>m({...s,confirmPassword:o.target.value})})})]})}),e.jsxs(N,{children:[e.jsx(x,{onClick:F,children:"Cancelar"}),e.jsx(x,{onClick:he,variant:"contained",children:"Guardar Usuario"})]})]}),e.jsxs($,{open:re,onClose:L,maxWidth:"lg",fullWidth:!0,children:[e.jsxs(R,{children:["Configurar Horarios Laborales - ",E?`${E.nombre} ${E.apellido}`:""]}),e.jsx(B,{children:e.jsx(f,{sx:{mt:2},children:Object.entries(Q).map(([o,a])=>e.jsxs(f,{sx:{mb:3},children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(w,{variant:"h6",sx:{minWidth:100,textTransform:"capitalize"},children:o}),e.jsx(x,{variant:"outlined",size:"small",onClick:()=>ve(o),startIcon:e.jsx(ae,{}),sx:{ml:2},children:"Agregar Turno"})]}),a.length===0?e.jsx(w,{variant:"body2",color:"text.secondary",sx:{ml:2},children:"Sin horarios configurados"}):e.jsx(l,{container:!0,spacing:2,sx:{ml:1},children:a.map((j,p)=>e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(f,{sx:{border:"1px solid #e0e0e0",borderRadius:1,p:2,display:"flex",alignItems:"center",gap:2},children:[e.jsx(n,{label:"Hora Inicio",type:"time",value:j.inicio,onChange:h=>ee(o,p,"inicio",h.target.value),size:"small",InputLabelProps:{shrink:!0}}),e.jsx(w,{variant:"body2",children:"hasta"}),e.jsx(n,{label:"Hora Fin",type:"time",value:j.fin,onChange:h=>ee(o,p,"fin",h.target.value),size:"small",InputLabelProps:{shrink:!0}}),e.jsx(g,{size:"small",color:"error",onClick:()=>ge(o,p),title:"Eliminar turno",children:e.jsx(U,{})})]})},p))}),e.jsx(oe,{sx:{mt:2}})]},o))})}),e.jsxs(N,{children:[e.jsx(x,{onClick:L,children:"Cancelar"}),e.jsx(x,{onClick:be,variant:"contained",children:"Guardar Horarios"})]})]}),e.jsxs($,{open:te,onClose:G,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(R,{children:["Datos Profesionales - ",y?`${y.nombre} ${y.apellido}`:""]}),e.jsx(B,{children:e.jsxs(l,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(l,{item:!0,xs:12,children:e.jsx(n,{fullWidth:!0,label:"Matrícula Profesional *",value:b.matricula,onChange:o=>k({...b,matricula:o.target.value}),placeholder:"MP 12345"})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(T,{fullWidth:!0,children:[e.jsx(P,{children:"Especialidad *"}),e.jsx(C,{value:b.especialidad,label:"Especialidad *",onChange:o=>k({...b,especialidad:o.target.value}),sx:{minWidth:200},children:ne.map(o=>e.jsx(u,{value:o,children:o},o))})]})})]})}),e.jsxs(N,{children:[e.jsx(x,{onClick:G,children:"Cancelar"}),e.jsx(x,{onClick:Te,variant:"contained",children:"Guardar Datos"})]})]})]})}export{so as default};
