import{j as e,M as de,B as H,y as ue,z as me,b as d,G as a,S as I,A as x,D as he,E as xe,I as O}from"./index-B4v5z84n.js";import{r as h,b as je}from"./router-BWB4lwgb.js";import{T as u,S as p,M as m,A as pe}from"./TextField-JXFbNTHZ.js";import{F as v}from"./FormControl-0BoHNiFb.js";import{I as b}from"./OutlinedInput-CLPfjtlP.js";import{S as ve,C as S}from"./Search-B_VDFuKQ.js";import{A as be,E as fe,T as ge,a as Ce,S as Pe}from"./ToggleOn-LRN4vZBO.js";import{T as Ie}from"./TableContainer-DHJIhT0E.js";import{T as Ae,d as Te,b as Y,c as l,a as Me}from"./TableRow-CEpqJaJk.js";import{D as R,a as w,b as G,c as U}from"./DialogTitle-D7slqSbK.js";import"./vendor-D5d5vywP.js";import"./useControlled-qcIaR4WP.js";function Re(){const[s,N]=h.useState({dni:"",nombreCompleto:"",tipoUsuario:"Todos",estado:"Todos"}),[K,W]=h.useState([]),[Q,F]=h.useState(!1),[i,A]=h.useState({dni:"",nombre:"",apellido:"",fechaNacimiento:"",telefono:"",cobertura:"seleccion-cobertura",plan:"",direccion:"",email:"",estado:"Activo",motivoInactivo:"",tipoPaciente:"Ambulatorio"}),[f,j]=h.useState(""),[V,y]=h.useState(!1),[X,z]=h.useState(!1),[r,g]=h.useState(null),[k,T]=h.useState(""),[q,C]=h.useState(""),Z=["OSDE","Swiss Medical","Galeno","Medicus","Omint","Sancor Salud","IOMA","PAMI","Obra Social Unión Personal","Obra Social Empleados de Comercio","OSECAC","OSDEPYM","Particular"],_=["Activo","Inactivo"],ee=["Fallecimiento","Fin de tratamiento","Cambio de centro médico","Abandono de tratamiento","Traslado","Otros"],oe=["Ambulatorio","Diálisis"],ie=o=>{const n={12345678:{dni:"12345678",nombre:"Juan",apellido:"Pérez",fechaNacimiento:"1985-03-15",telefono:"1156789012",cobertura:"OSDE",plan:"Plan 210",direccion:"Av. Corrientes 1234",email:"juan.perez@email.com",estado:"Activo",motivoInactivo:"",tipoPaciente:"Ambulatorio"},87654321:{dni:"87654321",nombre:"María",apellido:"González",fechaNacimiento:"1990-07-22",telefono:"1145678901",cobertura:"Swiss Medical",plan:"SMG 450",direccion:"",email:"",estado:"Activo",motivoInactivo:"",tipoPaciente:"Diálisis"},11223344:{dni:"11223344",nombre:"Carlos",apellido:"López",fechaNacimiento:"1980-12-10",telefono:"1134567890",cobertura:"Particular",plan:"",direccion:"Belgrano 567",email:"carlos.lopez@email.com",estado:"Inactivo",motivoInactivo:"Fin de tratamiento",tipoPaciente:"Ambulatorio"}}[o];n?(A(n),j("Paciente encontrado - Datos cargados para edición")):(A({dni:o,nombre:"",apellido:"",fechaNacimiento:"",telefono:"",cobertura:"",plan:"",direccion:"",email:"",estado:"Activo",motivoInactivo:"",tipoPaciente:""}),j("Paciente no encontrado - Complete los datos para registrar nuevo paciente")),F(!0)},M=[{id:1,dni:"12345678",nombre:"Juan Pérez",telefono:"1156789012",cobertura:"OSDE",tipoPaciente:"Ambulatorio",estado:"Activo"},{id:2,dni:"87654321",nombre:"María González",telefono:"1145678901",cobertura:"Swiss Medical",tipoPaciente:"Diálisis",estado:"Activo"},{id:3,dni:"11223344",nombre:"Carlos López",telefono:"1134567890",cobertura:"Particular",tipoPaciente:"Ambulatorio",estado:"Inactivo"}],D=o=>t=>{const n=t.target.value;if(o==="dni"){const P=n.replace(/\D/g,"");N({...s,[o]:P})}else N({...s,[o]:n})},ae=()=>{N({dni:"",nombreCompleto:"",tipoUsuario:"Todos",estado:"Todos"}),W(M)},E=()=>{let o=[...M];if(s.dni&&(o=o.filter(t=>t.dni.includes(s.dni))),s.nombreCompleto&&(o=o.filter(t=>t.nombre.toLowerCase().includes(s.nombreCompleto.toLowerCase()))),s.tipoUsuario!=="Todos"&&(o=o.filter(t=>t.tipoPaciente===s.tipoUsuario)),s.estado!=="Todos"){const t=s.estado==="Activos"?"Activo":"Inactivo";o=o.filter(n=>n.estado===t)}W(o)};je.useEffect(()=>{W(M)},[]);const te=()=>{F(!0),j("")},B=()=>{F(!1),re()},c=o=>t=>{A({...i,[o]:t.target.value})},re=()=>{A({dni:"",nombre:"",apellido:"",fechaNacimiento:"",telefono:"",cobertura:"seleccion-cobertura",plan:"",direccion:"",email:"",estado:"Activo",motivoInactivo:"",tipoPaciente:"Ambulatorio"}),j("")},ne=()=>{const t=["dni","nombre","apellido","fechaNacimiento","telefono","cobertura","tipoPaciente"].filter(n=>n==="cobertura"?!i[n]||i[n]==="seleccion-cobertura":!i[n]);if(i.estado==="Inactivo"&&!i.motivoInactivo&&t.push("motivoInactivo"),t.length>0){const n={dni:"DNI",nombre:"Nombre",apellido:"Apellido",fechaNacimiento:"Fecha de Nacimiento",telefono:"Teléfono",cobertura:"Cobertura",tipoPaciente:"Tipo de Paciente",motivoInactivo:"Motivo de Inactividad"},P=t.map(ce=>n[ce]);j(`Faltan completar los siguientes campos obligatorios: ${P.join(", ")}`);return}console.log("Guardando paciente desde modal:",i),j("Paciente guardado exitosamente"),setTimeout(()=>{B(),E()},1500)},L=(o,t)=>{const n=M.find(P=>P.dni===o);g(n),t==="Activo"?(y(!0),T(""),C("")):z(!0)},se=()=>{if(!k.trim()){C("El motivo de baja es obligatorio");return}console.log(`Desactivando paciente ${r.dni} con motivo: ${k}`),alert(`Paciente ${r.nombre} desactivado exitosamente`),y(!1),T(""),C(""),g(null),E()},$=()=>{y(!1),T(""),C(""),g(null)},le=()=>{console.log(`Reactivando paciente ${r.dni}`),alert(`Paciente ${r.nombre} reactivado exitosamente`),z(!1),g(null),E()},J=()=>{z(!1),g(null)};return e.jsxs(de,{title:"Gestión de Pacientes",children:[e.jsxs(H,{sx:{width:"100%"},children:[e.jsx(ue,{sx:{mb:3},children:e.jsxs(me,{children:[e.jsx(d,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Filtros de Búsqueda"}),e.jsxs(a,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(u,{label:"DNI",value:s.dni,onChange:D("dni"),fullWidth:!0,placeholder:"Solo números",inputProps:{inputMode:"numeric",pattern:"[0-9]*"}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(u,{label:"Nombre Completo",value:s.nombreCompleto,onChange:D("nombreCompleto"),fullWidth:!0,placeholder:"Buscar por nombre"})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsxs(v,{fullWidth:!0,children:[e.jsx(b,{children:"Tipo de Usuario"}),e.jsxs(p,{value:s.tipoUsuario,onChange:D("tipoUsuario"),label:"Tipo de Usuario",children:[e.jsx(m,{value:"Todos",children:"Todos"}),e.jsx(m,{value:"Ambulatorio",children:"Ambulatorio"}),e.jsx(m,{value:"Diálisis",children:"Diálisis"})]})]})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsxs(v,{fullWidth:!0,children:[e.jsx(b,{children:"Estado"}),e.jsxs(p,{value:s.estado,onChange:D("estado"),label:"Estado",children:[e.jsx(m,{value:"Todos",children:"Todos"}),e.jsx(m,{value:"Activos",children:"Activos"}),e.jsx(m,{value:"Inactivos",children:"Inactivos"})]})]})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsxs(I,{direction:"row",spacing:1,children:[e.jsx(x,{variant:"contained",startIcon:e.jsx(ve,{}),onClick:E,size:"small",children:"Buscar"}),e.jsx(x,{variant:"outlined",startIcon:e.jsx(S,{}),onClick:ae,size:"small",children:"Limpiar"})]})})]}),e.jsx(he,{sx:{my:2}}),e.jsx(H,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(x,{variant:"contained",color:"success",startIcon:e.jsx(be,{}),onClick:te,size:"medium",children:"Nuevo Paciente"})})]})}),e.jsx(Ie,{component:xe,children:e.jsxs(Ae,{children:[e.jsx(Te,{children:e.jsxs(Y,{children:[e.jsx(l,{children:"DNI"}),e.jsx(l,{children:"Nombre Completo"}),e.jsx(l,{children:"Teléfono"}),e.jsx(l,{children:"Cobertura"}),e.jsx(l,{children:"Tipo"}),e.jsx(l,{children:"Estado"}),e.jsx(l,{children:"Acciones"})]})}),e.jsx(Me,{children:K.map(o=>e.jsxs(Y,{children:[e.jsx(l,{children:o.dni}),e.jsx(l,{children:o.nombre}),e.jsx(l,{children:o.telefono}),e.jsx(l,{children:o.cobertura}),e.jsx(l,{children:o.tipoPaciente}),e.jsx(l,{children:e.jsx(d,{color:o.estado==="Activo"?"success.main":"error.main",fontWeight:"bold",children:o.estado})}),e.jsx(l,{children:e.jsxs(I,{direction:"row",spacing:1,children:[e.jsx(O,{color:"primary",size:"small",onClick:()=>ie(o.dni),title:"Editar paciente",children:e.jsx(fe,{})}),o.estado==="Activo"?e.jsx(O,{color:"error",size:"small",onClick:()=>L(o.dni,o.estado),title:"Desactivar paciente",children:e.jsx(ge,{})}):e.jsx(O,{color:"success",size:"small",onClick:()=>L(o.dni,o.estado),title:"Reactivar paciente",children:e.jsx(Ce,{})})]})})]},o.id))})]})})]}),e.jsxs(R,{open:Q,onClose:B,maxWidth:"md",fullWidth:!0,children:[e.jsx(w,{children:e.jsx(d,{variant:"h6",component:"div",children:i.dni&&f.includes("encontrado")?"Editar Paciente":"Registrar Nuevo Paciente"})}),e.jsx(G,{children:e.jsxs(I,{spacing:3,sx:{mt:1},children:[f&&e.jsx(pe,{severity:f.includes("exitosamente")?"success":f.includes("Faltan")?"error":"info",children:f}),e.jsx(d,{variant:"subtitle1",fontWeight:"bold",children:"Datos del Paciente"}),e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(u,{label:"DNI *",value:i.dni,onChange:c("dni"),fullWidth:!0,required:!0,placeholder:"Ingrese DNI sin puntos"})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(u,{label:"Nombre *",value:i.nombre,onChange:c("nombre"),fullWidth:!0,required:!0})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(u,{label:"Apellido *",value:i.apellido,onChange:c("apellido"),fullWidth:!0,required:!0})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(u,{label:"Fecha de Nacimiento *",type:"date",value:i.fechaNacimiento,onChange:c("fechaNacimiento"),fullWidth:!0,required:!0,InputLabelProps:{shrink:!0}})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(u,{label:"Teléfono *",value:i.telefono,onChange:c("telefono"),fullWidth:!0,required:!0,placeholder:"Ej: 1156789012"})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(u,{label:"Correo Electrónico",type:"email",value:i.email,onChange:c("email"),fullWidth:!0,placeholder:"ejemplo@email.com"})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(u,{label:"Dirección",value:i.direccion,onChange:c("direccion"),fullWidth:!0,placeholder:"Calle, número, ciudad"})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(v,{fullWidth:!0,required:!0,children:[e.jsx(b,{children:"Cobertura Médica *"}),e.jsxs(p,{value:i.cobertura,onChange:c("cobertura"),label:"Cobertura Médica *",children:[e.jsx(m,{value:"seleccion-cobertura",disabled:!0,sx:{color:"text.disabled"},children:"Selección cobertura"}),Z.map(o=>e.jsx(m,{value:o,children:o},o))]})]})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(u,{label:"Plan",value:i.plan,onChange:c("plan"),fullWidth:!0,placeholder:"Ej: Plan 210, SMG 450, etc."})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(v,{fullWidth:!0,required:!0,children:[e.jsx(b,{children:"Tipo de Paciente *"}),e.jsx(p,{value:i.tipoPaciente,onChange:c("tipoPaciente"),label:"Tipo de Paciente *",children:oe.map(o=>e.jsx(m,{value:o,children:o},o))})]})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(v,{fullWidth:!0,required:!0,children:[e.jsx(b,{children:"Estado *"}),e.jsx(p,{value:i.estado,onChange:c("estado"),label:"Estado *",children:_.map(o=>e.jsx(m,{value:o,children:o},o))})]})}),i.estado==="Inactivo"&&e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(v,{fullWidth:!0,required:!0,children:[e.jsx(b,{children:"Motivo de Inactividad *"}),e.jsx(p,{value:i.motivoInactivo,onChange:c("motivoInactivo"),label:"Motivo de Inactividad *",children:ee.map(o=>e.jsx(m,{value:o,children:o},o))})]})})]}),e.jsxs(d,{variant:"caption",color:"text.secondary",children:["* Campos obligatorios: DNI, Nombre, Apellido, Fecha de Nacimiento, Teléfono, Cobertura Médica, Tipo de Paciente",e.jsx("br",{}),"** Los campos Plan, Correo Electrónico y Dirección son opcionales",e.jsx("br",{}),'*** Si el estado es "Inactivo", el motivo de inactividad es obligatorio']})]})}),e.jsxs(U,{children:[e.jsx(x,{onClick:B,startIcon:e.jsx(S,{}),children:"Cancelar"}),e.jsx(x,{onClick:ne,variant:"contained",startIcon:e.jsx(Pe,{}),children:"Guardar Paciente"})]})]}),e.jsxs(R,{open:V,onClose:$,maxWidth:"sm",fullWidth:!0,children:[e.jsx(w,{children:e.jsx(d,{variant:"h6",component:"div",children:"Desactivar Paciente"})}),e.jsx(G,{children:e.jsxs(I,{spacing:3,sx:{mt:1},children:[e.jsxs(d,{variant:"body1",children:["¿Está seguro que desea desactivar al paciente ",e.jsx("strong",{children:r==null?void 0:r.nombre})," (DNI: ",e.jsx("strong",{children:r==null?void 0:r.dni}),")?"]}),e.jsx(u,{label:"Motivo de baja *",multiline:!0,rows:3,value:k,onChange:o=>{T(o.target.value),q&&C("")},fullWidth:!0,required:!0,placeholder:"Ingrese el motivo por el cual se desactiva al paciente",error:!!q,helperText:q}),e.jsx(d,{variant:"caption",color:"text.secondary",children:"* El motivo de baja es obligatorio"})]})}),e.jsxs(U,{children:[e.jsx(x,{onClick:$,startIcon:e.jsx(S,{}),children:"Cancelar"}),e.jsx(x,{onClick:se,variant:"contained",color:"error",children:"Desactivar Paciente"})]})]}),e.jsxs(R,{open:X,onClose:J,maxWidth:"sm",fullWidth:!0,children:[e.jsx(w,{children:e.jsx(d,{variant:"h6",component:"div",children:"Reactivar Paciente"})}),e.jsx(G,{children:e.jsxs(I,{spacing:2,sx:{mt:1},children:[e.jsxs(d,{variant:"body1",children:["¿Está seguro que desea reactivar al paciente ",e.jsx("strong",{children:r==null?void 0:r.nombre}),", DNI ",e.jsx("strong",{children:r==null?void 0:r.dni}),"?"]}),e.jsx(d,{variant:"body2",color:"text.secondary",children:"Al reactivar este paciente, podrá volver a recibir atención médica y aparecerá en las búsquedas activas."})]})}),e.jsxs(U,{children:[e.jsx(x,{onClick:J,startIcon:e.jsx(S,{}),children:"Cancelar"}),e.jsx(x,{onClick:le,variant:"contained",color:"success",children:"Reactivar Paciente"})]})]})]})}export{Re as default};
