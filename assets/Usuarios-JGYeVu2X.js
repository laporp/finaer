import{R as D,j as e,M as Z,G as l,y as _,z as ee,b as W,S as oe,A as p,B as E,E as se,C as I,I as v}from"./index-Bnb3IdSO.js";import{r as h}from"./router-BWB4lwgb.js";import{T as n,S as f,M as m,A as ae}from"./TextField-BzF4YXrv.js";import{F as g}from"./FormControl-CdErbr8j.js";import{I as b}from"./OutlinedInput-BkUKPOVC.js";import{S as le,C as U}from"./Search-BwJtXfxB.js";import{A as ie,S as re,E as te,T as ne,a as ce}from"./ToggleOn-B5I4mK_l.js";import{T as de}from"./TableContainer-Dcxlx433.js";import{T as me,d as xe,b as k,c as r,a as he}from"./TableRow-iWNsxWmG.js";import{D as ue,a as je,b as pe,c as ve}from"./DialogTitle-jX2fboJG.js";import"./vendor-D5d5vywP.js";import"./useControlled-qcIaR4WP.js";const fe=D(e.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),ge=D(e.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}));function We(){const[i,u]=h.useState({email:"",nombreCompleto:"",rol:"Todos",estado:"Todos"}),[z,S]=h.useState([]),[L,M]=h.useState(!1),[s,d]=h.useState({email:"",nombre:"",apellido:"",telefono:"",rol:"",password:"",confirmPassword:"",estado:"activo"}),[j,T]=h.useState(null),[c,x]=h.useState({}),[y,t]=h.useState(""),[C,R]=h.useState(!1),A=["Administrador","Administrativo","Profesional","Supervisor"],P=[{id:1,email:"admin@finaer.com",nombre:"Juan Carlos",apellido:"Pérez",telefono:"011-4567-8901",rol:"Administrador",fechaCreacion:"2024-01-15",estado:"activo",ultimoAcceso:"2024-07-23"},{id:2,email:"administrativo@finaer.com",nombre:"María Elena",apellido:"García",telefono:"011-4567-8902",rol:"Administrativo",fechaCreacion:"2024-02-10",estado:"activo",ultimoAcceso:"2024-07-22"},{id:3,email:"dr.lopez@finaer.com",nombre:"Carlos Alberto",apellido:"López",telefono:"011-4567-8903",rol:"Profesional",fechaCreacion:"2024-03-05",estado:"activo",ultimoAcceso:"2024-07-20"},{id:4,email:"supervisor@finaer.com",nombre:"Ana Laura",apellido:"Martínez",telefono:"011-4567-8904",rol:"Supervisor",fechaCreacion:"2024-01-20",estado:"inactivo",ultimoAcceso:"2024-07-15"}],B=()=>{let o=P.filter(a=>{const K=i.email===""||a.email.toLowerCase().includes(i.email.toLowerCase()),Q=i.nombreCompleto===""||`${a.nombre} ${a.apellido}`.toLowerCase().includes(i.nombreCompleto.toLowerCase()),X=i.rol==="Todos"||a.rol===i.rol,Y=i.estado==="Todos"||a.estado===i.estado;return K&&Q&&X&&Y});S(o),t(`Se encontraron ${o.length} usuarios que coinciden con los filtros.`),setTimeout(()=>t(""),3e3)},G=()=>{u({email:"",nombreCompleto:"",rol:"Todos",estado:"Todos"}),S([]),t("Filtros limpiados correctamente."),setTimeout(()=>t(""),3e3)},$=()=>{M(!0),d({email:"",nombre:"",apellido:"",telefono:"",rol:"",password:"",confirmPassword:"",estado:"activo"})},w=()=>{M(!1),d({email:"",nombre:"",apellido:"",telefono:"",rol:"",password:"",confirmPassword:"",estado:"activo"})},N=()=>{if(!s.email||!s.nombre||!s.apellido||!s.rol){t("Por favor complete todos los campos obligatorios."),setTimeout(()=>t(""),3e3);return}if(s.password!==s.confirmPassword){t("Las contraseñas no coinciden."),setTimeout(()=>t(""),3e3);return}console.log("Guardando usuario:",s),t("Usuario creado exitosamente."),setTimeout(()=>t(""),3e3),w()},J=o=>{T(o.id),x({...o})},O=()=>{T(null),x({})},q=()=>{console.log("Guardando cambios:",c),t("Usuario actualizado exitosamente."),setTimeout(()=>t(""),3e3),T(null),x({})},V=(o,a)=>{console.log(`Cambiando estado del usuario ${o} a ${a}`),t(`Usuario ${a==="activo"?"activado":"desactivado"} exitosamente.`),setTimeout(()=>t(""),3e3)},H=o=>({Administrador:"error",Supervisor:"warning",Profesional:"info",Administrativo:"success"})[o]||"default",F=z.length>0?z:P;return e.jsxs(Z,{title:"Gestión de Usuarios",children:[e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,children:e.jsx(_,{children:e.jsxs(ee,{children:[e.jsx(W,{variant:"h6",gutterBottom:!0,children:"Filtros de Búsqueda"}),e.jsxs(l,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(l,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Email",value:i.email,onChange:o=>u({...i,email:o.target.value}),placeholder:"usuario@email.com"})}),e.jsx(l,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Nombre Completo",value:i.nombreCompleto,onChange:o=>u({...i,nombreCompleto:o.target.value}),placeholder:"Juan Pérez"})}),e.jsx(l,{item:!0,xs:12,md:2,children:e.jsxs(g,{fullWidth:!0,children:[e.jsx(b,{children:"Rol"}),e.jsxs(f,{value:i.rol,label:"Rol",onChange:o=>u({...i,rol:o.target.value}),children:[e.jsx(m,{value:"Todos",children:"Todos"}),A.map(o=>e.jsx(m,{value:o,children:o},o))]})]})}),e.jsx(l,{item:!0,xs:12,md:2,children:e.jsxs(g,{fullWidth:!0,children:[e.jsx(b,{children:"Estado"}),e.jsxs(f,{value:i.estado,label:"Estado",onChange:o=>u({...i,estado:o.target.value}),children:[e.jsx(m,{value:"Todos",children:"Todos"}),e.jsx(m,{value:"activo",children:"Activo"}),e.jsx(m,{value:"inactivo",children:"Inactivo"})]})]})}),e.jsx(l,{item:!0,xs:12,md:2,children:e.jsxs(oe,{direction:"row",spacing:1,children:[e.jsx(p,{variant:"contained",startIcon:e.jsx(le,{}),onClick:B,sx:{height:"56px"},children:"Buscar"}),e.jsx(p,{variant:"outlined",startIcon:e.jsx(U,{}),onClick:G,sx:{height:"56px"},children:"Limpiar"})]})})]})]})})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(E,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(W,{variant:"h6",children:["Lista de Usuarios (",F.length,")"]}),e.jsx(p,{variant:"contained",startIcon:e.jsx(ie,{}),onClick:$,children:"Agregar Usuario"})]})}),y&&e.jsx(l,{item:!0,xs:12,children:e.jsx(ae,{severity:"info",sx:{mb:2},children:y})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(de,{component:se,children:e.jsxs(me,{children:[e.jsx(xe,{children:e.jsxs(k,{children:[e.jsx(r,{children:e.jsx("strong",{children:"Email"})}),e.jsx(r,{children:e.jsx("strong",{children:"Nombre Completo"})}),e.jsx(r,{children:e.jsx("strong",{children:"Teléfono"})}),e.jsx(r,{children:e.jsx("strong",{children:"Rol"})}),e.jsx(r,{children:e.jsx("strong",{children:"Fecha Creación"})}),e.jsx(r,{children:e.jsx("strong",{children:"Último Acceso"})}),e.jsx(r,{children:e.jsx("strong",{children:"Estado"})}),e.jsx(r,{children:e.jsx("strong",{children:"Acciones"})})]})}),e.jsx(he,{children:F.map(o=>e.jsxs(k,{children:[e.jsx(r,{children:j===o.id?e.jsx(n,{size:"small",value:c.email||"",onChange:a=>x({...c,email:a.target.value})}):o.email}),e.jsx(r,{children:j===o.id?e.jsxs(E,{sx:{display:"flex",gap:1},children:[e.jsx(n,{size:"small",placeholder:"Nombre",value:c.nombre||"",onChange:a=>x({...c,nombre:a.target.value})}),e.jsx(n,{size:"small",placeholder:"Apellido",value:c.apellido||"",onChange:a=>x({...c,apellido:a.target.value})})]}):`${o.nombre} ${o.apellido}`}),e.jsx(r,{children:j===o.id?e.jsx(n,{size:"small",value:c.telefono||"",onChange:a=>x({...c,telefono:a.target.value})}):o.telefono}),e.jsx(r,{children:j===o.id?e.jsx(g,{size:"small",sx:{minWidth:120},children:e.jsx(f,{value:c.rol||"",onChange:a=>x({...c,rol:a.target.value}),children:A.map(a=>e.jsx(m,{value:a,children:a},a))})}):e.jsx(I,{label:o.rol,color:H(o.rol),size:"small"})}),e.jsx(r,{children:o.fechaCreacion}),e.jsx(r,{children:o.ultimoAcceso}),e.jsx(r,{children:e.jsx(I,{label:o.estado==="activo"?"Activo":"Inactivo",color:o.estado==="activo"?"success":"default",size:"small"})}),e.jsx(r,{children:e.jsx(E,{sx:{display:"flex",gap:1},children:j===o.id?e.jsxs(e.Fragment,{children:[e.jsx(v,{size:"small",color:"primary",onClick:q,title:"Guardar cambios",children:e.jsx(re,{})}),e.jsx(v,{size:"small",color:"secondary",onClick:O,title:"Cancelar edición",children:e.jsx(U,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{size:"small",color:"primary",onClick:()=>J(o),title:"Editar usuario",children:e.jsx(te,{})}),e.jsx(v,{size:"small",color:o.estado==="activo"?"warning":"success",onClick:()=>V(o.id,o.estado==="activo"?"inactivo":"activo"),title:o.estado==="activo"?"Desactivar usuario":"Activar usuario",children:o.estado==="activo"?e.jsx(ne,{}):e.jsx(ce,{})})]})})})]},o.id))})]})})})]}),e.jsxs(ue,{open:L,onClose:w,maxWidth:"md",fullWidth:!0,children:[e.jsx(je,{children:"Agregar Nuevo Usuario"}),e.jsx(pe,{children:e.jsxs(l,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(n,{fullWidth:!0,label:"Email *",type:"email",value:s.email,onChange:o=>d({...s,email:o.target.value}),placeholder:"usuario@email.com"})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(g,{fullWidth:!0,children:[e.jsx(b,{children:"Rol *"}),e.jsx(f,{value:s.rol,label:"Rol *",onChange:o=>d({...s,rol:o.target.value}),children:A.map(o=>e.jsx(m,{value:o,children:o},o))})]})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(n,{fullWidth:!0,label:"Nombre *",value:s.nombre,onChange:o=>d({...s,nombre:o.target.value}),placeholder:"Juan"})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(n,{fullWidth:!0,label:"Apellido *",value:s.apellido,onChange:o=>d({...s,apellido:o.target.value}),placeholder:"Pérez"})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(n,{fullWidth:!0,label:"Teléfono",value:s.telefono,onChange:o=>d({...s,telefono:o.target.value}),placeholder:"011-4567-8901"})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(g,{fullWidth:!0,children:[e.jsx(b,{children:"Estado"}),e.jsxs(f,{value:s.estado,label:"Estado",onChange:o=>d({...s,estado:o.target.value}),children:[e.jsx(m,{value:"activo",children:"Activo"}),e.jsx(m,{value:"inactivo",children:"Inactivo"})]})]})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(n,{fullWidth:!0,label:"Contraseña *",type:C?"text":"password",value:s.password,onChange:o=>d({...s,password:o.target.value}),InputProps:{endAdornment:e.jsx(v,{onClick:()=>R(!C),edge:"end",children:C?e.jsx(ge,{}):e.jsx(fe,{})})}})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(n,{fullWidth:!0,label:"Confirmar Contraseña *",type:C?"text":"password",value:s.confirmPassword,onChange:o=>d({...s,confirmPassword:o.target.value})})})]})}),e.jsxs(ve,{children:[e.jsx(p,{onClick:w,children:"Cancelar"}),e.jsx(p,{onClick:N,variant:"contained",children:"Guardar Usuario"})]})]})]})}export{We as default};
